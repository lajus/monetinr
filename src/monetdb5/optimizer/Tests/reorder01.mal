#select count(*) from (select * from tables union select * from tables );
#don;t depend on SQL library
function sql.bind(s:str,t:str,c:str,i:int):bat[:any_1,:any_2];
	return bat.new(:any_1,:any_2);
end bind;
function sql.bind_dbat(s:str,t:str,i:int):bat[:any_1,:any_2];
    return bat.new(:any_1,:any_2);
end bind_dbat;
function user.s0_0():void;
    _1:bat[:oid,:int]  := sql.bind("tmp","_tables","id",0);
    _6:bat[:oid,:oid]  := sql.bind_dbat("tmp","_tables",1);
    _8 := bat.reverse(_6);
    _9 := algebra.kdifference(_1,_8);
    _11 := algebra.markT(_9,0@0);
    _12 := bat.reverse(_11);
    _13:bat[:oid,:sht]  := sql.bind("tmp","_tables","type",0);
    _15 := algebra.join(_12,_13);
    _16:bat[:oid,:int]  := sql.bind("sys","_tables","id",0);
    _18:bat[:oid,:int]  := sql.bind("sys","_tables","id",1);
    _19 := algebra.kunion(_16,_18);
    _20:bat[:oid,:int]  := sql.bind("sys","_tables","id",2);
    _22 := algebra.kdifference(_19,_20);
    _23 := algebra.kunion(_22,_20);
    _24:bat[:oid,:oid]  := sql.bind_dbat("sys","_tables",1);
    _25 := bat.reverse(_24);
    _26 := algebra.kdifference(_23,_25);
    _27 := algebra.markT(_26,0@0);
    _28 := bat.reverse(_27);
    _29:bat[:oid,:sht]  := sql.bind("sys","_tables","type",0);
    _30:bat[:oid,:sht]  := sql.bind("sys","_tables","type",1);
    _31 := algebra.kunion(_29,_30);
    _32:bat[:oid,:sht]  := sql.bind("sys","_tables","type",2);
    _33 := algebra.kdifference(_31,_32);
    _34 := algebra.kunion(_33,_32);
    _35 := algebra.join(_28,_34);
    bat.append(_35,_15,true);
    _39 := algebra.thetauselect(_35,2:sht,"<");
    _41 := algebra.markT(_39,0@0);
    _42 := bat.reverse(_41);
    _43 := algebra.join(_12,_1);
    _44 := algebra.join(_28,_23);
    bat.append(_44,_43,true);
    _46 := algebra.join(_42,_44);
    _47 := algebra.markT(_46,0@0);
    _48 := bat.reverse(_47);
    _49 := algebra.join(_48,_46);
    _50:bat[:oid,:int]  := sql.bind("tmp","_tables","id",0);
    _51:bat[:oid,:oid]  := sql.bind_dbat("tmp","_tables",1);
    _52 := bat.reverse(_51);
    _53 := algebra.kdifference(_50,_52);
    _54 := algebra.markT(_53,0@0);
    _55 := bat.reverse(_54);
    _56:bat[:oid,:sht]  := sql.bind("tmp","_tables","type",0);
    _57 := algebra.join(_55,_56);
    _58:bat[:oid,:int]  := sql.bind("sys","_tables","id",0);
    _59:bat[:oid,:int]  := sql.bind("sys","_tables","id",1);
    _60 := algebra.kunion(_58,_59);
    _61:bat[:oid,:int]  := sql.bind("sys","_tables","id",2);
    _62 := algebra.kdifference(_60,_61);
    _63 := algebra.kunion(_62,_61);
    _64:bat[:oid,:oid]  := sql.bind_dbat("sys","_tables",1);
    _65 := bat.reverse(_64);
    _66 := algebra.kdifference(_63,_65);
    _67 := algebra.markT(_66,0@0);
    _68 := bat.reverse(_67);
    _69:bat[:oid,:sht]  := sql.bind("sys","_tables","type",0);
    _70:bat[:oid,:sht]  := sql.bind("sys","_tables","type",1);
    _71 := algebra.kunion(_69,_70);
    _72:bat[:oid,:sht]  := sql.bind("sys","_tables","type",2);
    _73 := algebra.kdifference(_71,_72);
    _74 := algebra.kunion(_73,_72);
    _75 := algebra.join(_68,_74);
    bat.append(_75,_57,true);
    _77 := algebra.thetauselect(_75,2:sht,"<");
    _78 := algebra.markT(_77,0@0);
    _79 := bat.reverse(_78);
    _80 := algebra.join(_55,_50);
    _81 := algebra.join(_68,_63);
    bat.append(_81,_80,true);
    _83 := algebra.join(_79,_81);
    _84 := algebra.markT(_83,0@0);
    _85 := bat.reverse(_84);
    _86 := algebra.join(_85,_83);
    bat.append(_86,_49,true);
    (ext115,grp113) := group.new(_86);
    _90:bat[:oid,:str]  := sql.bind("tmp","_tables","name",0);
    _92 := algebra.join(_12,_90);
    _93:bat[:oid,:str]  := sql.bind("sys","_tables","name",0);
    _94:bat[:oid,:str]  := sql.bind("sys","_tables","name",1);
    _95 := algebra.kunion(_93,_94);
    _96:bat[:oid,:str]  := sql.bind("sys","_tables","name",2);
    _97 := algebra.kdifference(_95,_96);
    _98 := algebra.kunion(_97,_96);
    _99 := algebra.join(_28,_98);
    bat.append(_99,_92,true);
    _101 := algebra.join(_42,_99);
    _102 := algebra.join(_48,_101);
    _103 := algebra.join(_55,_90);
    _104 := algebra.join(_68,_98);
    bat.append(_104,_103,true);
    _106 := algebra.join(_79,_104);
    _107 := algebra.join(_85,_106);
    bat.append(_107,_102,true);
    (ext151,grp149) := group.derive(ext115,grp113,_107);
    _111:bat[:oid,:int]  := sql.bind("tmp","_tables","schema_id",0);
    _113 := algebra.join(_12,_111);
    _114:bat[:oid,:int]  := sql.bind("sys","_tables","schema_id",0);
    _115:bat[:oid,:int]  := sql.bind("sys","_tables","schema_id",1);
    _116 := algebra.kunion(_114,_115);
    _117:bat[:oid,:int]  := sql.bind("sys","_tables","schema_id",2);
    _118 := algebra.kdifference(_116,_117);
    _119 := algebra.kunion(_118,_117);
    _120 := algebra.join(_28,_119);
    bat.append(_120,_113,true);
    _122 := algebra.join(_42,_120);
    _123 := algebra.join(_48,_122);
    _124 := algebra.join(_55,_111);
    _125 := algebra.join(_68,_119);
    bat.append(_125,_124,true);
    _127 := algebra.join(_79,_125);
    _128 := algebra.join(_85,_127);
    bat.append(_128,_123,true);
    (ext187,grp185) := group.derive(ext151,grp149,_128);
    _132:bat[:oid,:str]  := sql.bind("tmp","_tables","query",0);
    _134 := algebra.join(_12,_132);
    _135:bat[:oid,:str]  := sql.bind("sys","_tables","query",0);
    _136:bat[:oid,:str]  := sql.bind("sys","_tables","query",1);
    _137 := algebra.kunion(_135,_136);
    _138:bat[:oid,:str]  := sql.bind("sys","_tables","query",2);
    _139 := algebra.kdifference(_137,_138);
    _140 := algebra.kunion(_139,_138);
    _141 := algebra.join(_28,_140);
    bat.append(_141,_134,true);
    _143 := algebra.join(_42,_141);
    _144 := algebra.join(_48,_143);
    _145 := algebra.join(_55,_132);
    _146 := algebra.join(_68,_140);
    bat.append(_146,_145,true);
    _148 := algebra.join(_79,_146);
    _149 := algebra.join(_85,_148);
    bat.append(_149,_144,true);
    (ext223,grp221) := group.derive(ext187,grp185,_149);
    _153 := algebra.join(_42,_35);
    _154 := algebra.join(_48,_153);
    _155 := algebra.join(_79,_75);
    _156 := algebra.join(_85,_155);
    bat.append(_156,_154,true);
    (ext231,grp229) := group.derive(ext223,grp221,_156);
    _160:bat[:oid,:bit]  := sql.bind("tmp","_tables","system",0);
    _162 := algebra.join(_12,_160);
    _163:bat[:oid,:bit]  := sql.bind("sys","_tables","system",0);
    _164:bat[:oid,:bit]  := sql.bind("sys","_tables","system",1);
    _165 := algebra.kunion(_163,_164);
    _166:bat[:oid,:bit]  := sql.bind("sys","_tables","system",2);
    _167 := algebra.kdifference(_165,_166);
    _168 := algebra.kunion(_167,_166);
    _169 := algebra.join(_28,_168);
    bat.append(_169,_162,true);
    _171 := algebra.join(_42,_169);
    _172 := algebra.join(_48,_171);
    _173 := algebra.join(_55,_160);
    _174 := algebra.join(_68,_168);
    bat.append(_174,_173,true);
    _176 := algebra.join(_79,_174);
    _177 := algebra.join(_85,_176);
    bat.append(_177,_172,true);
    (ext267,grp265) := group.derive(ext231,grp229,_177);
    _181:bat[:oid,:sht]  := sql.bind("tmp","_tables","commit_action",0);
    _183 := algebra.join(_12,_181);
    _184:bat[:oid,:sht]  := sql.bind("sys","_tables","commit_action",0);
    _185:bat[:oid,:sht]  := sql.bind("sys","_tables","commit_action",1);
    _186 := algebra.kunion(_184,_185);
    _187:bat[:oid,:sht]  := sql.bind("sys","_tables","commit_action",2);
    _188 := algebra.kdifference(_186,_187);
    _189 := algebra.kunion(_188,_187);
    _190 := algebra.join(_28,_189);
    bat.append(_190,_183,true);
    _192 := algebra.join(_42,_190);
    _193 := algebra.join(_48,_192);
    _194 := algebra.join(_55,_181);
    _195 := algebra.join(_68,_189);
    bat.append(_195,_194,true);
    _197 := algebra.join(_79,_195);
    _198 := algebra.join(_85,_197);
    bat.append(_198,_193,true);
    (ext303,grp301) := group.derive(ext267,grp265,_198);
    _203 := algebra.project(_12,1);
    _205 := algebra.project(_28,0);
    bat.append(_205,_203,true);
    _207 := algebra.join(_42,_205);
    _208 := algebra.join(_48,_207);
    _209 := algebra.project(_55,1);
    _210 := algebra.project(_68,0);
    bat.append(_210,_209,true);
    _212 := algebra.join(_79,_210);
    _213 := algebra.join(_85,_212);
    bat.append(_213,_208,true);
    (ext324,grp322) := group.derive(ext303,grp301,_213);
    _217 := bat.mirror(ext324);
    _218 := algebra.join(_217,_86);
    _219 := algebra.markT(_218,0@0);
    _220 := bat.reverse(_219);
    _221 := aggr.count(_220);
end s0_0;
optimizer.reorder("user","s0_0");
mdb.list("user","s0_0");
